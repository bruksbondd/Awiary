{"version":3,"sources":["component/spinner/spiner.module.css","component/note/note.module.css","component/sidebarCalendar/sidebarCalendar.module.css","component/sidebar/sidebar.module.css","component/header/logo.svg","component/header/signOut.svg","serviceWorker.ts","helpers/changeFormatDate.ts","services/firebase.js","store/noteReducer.ts","store/calendarReducer.js","store/actionTypes.js","store/activityReducer.ts","store/editorReducer.ts","hooks/useShallowEqualSelector.tsx","component/calendar/Calendar.tsx","pages/Home.tsx","helpers/auth.js","component/Footer.tsx","pages/Sign/Login.tsx","pages/Sign/Signup.tsx","component/spinner/Spinner.js","store/authReducer.ts","helpers/validateContent.js","component/modal/Modal.tsx","component/editor/Editor.tsx","component/messageItem/MessageItem.tsx","helpers/shouldShowDay.ts","component/messages/Messages.tsx","component/editorPanel/EditorPanel.tsx","component/note/Note.tsx","store/thunksDayReducer.ts","component/sidebarCalendar/SidebarCalendar.js","component/inputDay/InputDay.tsx","component/activityEvent/ActivityEvent.tsx","component/sidebar/Sidebar.tsx","pages/Day/Day.tsx","component/allMessages/AllMessages.tsx","pages/Notes/Notes.tsx","component/header/Header.tsx","App.tsx","store/index.ts","index.tsx","pages/Sign/Sign.module.css","component/messages/messages.module.css","component/header/header.module.css","component/inputDay/inputDay.module.css","component/activityEvent/activityEvent.module.css","pages/Notes/notes.module.css","pages/Sign/google.svg","component/editorPanel/editorPanel.module.css","pages/Day/day.module.css","component/modal/modal.module.css","component/allMessages/allMessages.module.css","App.module.css","component/calendar/Calendar.module.css"],"names":["module","exports","Boolean","window","location","hostname","match","changeFormatDate","timestamp","Date","divide","d","getDate","getMonth","getFullYear","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","db","firestore","rtdb","database","setupPresence","user","isOfflineForRTDB","state","lastChanged","ServerValue","TIMESTAMP","isOnlineForRTDB","isOfflineForFirestore","FieldValue","serverTimestamp","isOnlineForFirestore","rtdbRef","ref","uid","userDoc","doc","on","snapshot","a","val","update","status","onDisconnect","set","initialState","allNotes","allAwareness","allNotesMonth","todayNotes","loadingNotes","lastSnapshotNote","lastSnapshotAware","runOutOfNotes","errorNotes","content","itemDate","key","dataNewDay","typePage","actions","error","type","payload","getNotesSelectedDay","dispatch","getState","selectedDate","calendar","userUid","notesArray","allMessages","collection","get","allMessagesToday","docs","push","data","id","sort","b","getAllNotes","path","notes","lastSnapshot","allAware","all","allNotesArray","console","log","first","collectionGroup","where","orderBy","limit","startAfter","last","length","forEach","newArray","concat","undefined","updateAllNotes","keyNote","itemData","isDate","messages","newObj","filter","item","map","addNewNote","selectType","editor","selectedType","todayDate","add","createdAt","date","now","updateNote","newContent","then","deleteNote","delete","todayData","loadingData","errorData","setTodayNumber","day","fetchToDayData","calendarReducer","action","allActivity","loadingActivity","errorActivity","todayActivity","array","activity","fetchToDayActivity","onSnapshot","querySnapshot","activeEditor","activeEditorChangeOldContent","activeFillEditor","activeModal","changeSelectedType","selected","changeEditorContent","text","toggleEditorOldContent","isContent","toggleActiveFillEditor","toggleActiveModal","selector","useSelector","shallowEqual","Calendar","useState","currentMonth","setCurrentMonth","history","useHistory","useShallowEqualSelector","active","useDispatch","useEffect","arrDate","i","nextMonth","addMonths","prevMonth","subMonths","className","styles","header","row","col","colStart","icon","onClick","colCenter","format","locale","ru","colEnd","days","startDate","startOfWeek","weekStartsOn","dayWek","addDays","renderDays","monthStart","startOfMonth","monthEnd","endOfMonth","endDate","endOfWeek","rows","formattedDate","cloneDay","year","mount","today","activitiesToday","Object","keys","meditation","includes","style","color","yoga","notesToday","awarenesToday","cell","isSameMonth","isSameDay","disabled","isFuture","toString","onDateClick","number","activities","bg","body","renderCells","Home","props","signup","email","password","createUserWithEmailAndPassword","signin","signInWithEmailAndPassword","signInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","Footer","Login","setError","setEmail","setPassword","handleSubmit","event","preventDefault","message","googleSignIn","wrapper","form_box","autoComplete","onSubmit","header_block","title","to","placeholder","name","onChange","target","value","submit","signGoogle","src","google","alt","SignUp","Spinner","spinner","CircularProgress","displayName","photoUrl","loading","isAuth","validateContent","replace","trim","split","SuccessEditModal","handleEdit","handleCreateNote","Modal","aria-labelledby","aria-describedby","modal","open","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","paper","Button","variant","Editor","handleSaveContent","saveContent","hide","setContents","lang","setOptions","showPathLabel","maxCharCount","width","height","minHeight","maxHeight","buttonList","callBackSave","MessageItem","note","previous","isAll","setTime","showDay","seconds","shouldShowDay","showDate","editorContent","useCallback","changeItemDate","setKey","removeContent","dateItem","DateBlock","date_item","message_item","message_item_box","class_note","class_awareness","message_time","getHours","getMinutes","message_text","ReactHtmlParser","message_remote","message_editor","message_remove","date_item_container","Messages","messages_area","messages_area_active_editor","EditorPanel","select","handelHideEditor","handelClearEditor","NoteButton","withStyles","theme","root","palette","getContrastText","purple","backgroundColor","opacity","AwarenessButton","CleanButton","border","HiddenButton","editor_panel","editor_panel_group","Note","thunk","thought","errorThanks","fetchToDayThanks","arrThunk","thunks","setState","this","selectedDay","renderHeader","React","Component","connect","withRouter","InputDay","setText","editMode","setEditMode","hadChange","setHadChange","blockInput","inputTitle","input","e","autoFocus","save","thunksRef","addThanks","showText","ActivityEvent","activeMeditation","activeYoga","handleActive","arrayRemove","removeActivity","isTodayActivity","activityRef","arrayUnion","addActivity","actionBox","actionItem","actionText","Sidebar","thunksValue","thoughtValue","pageDaySideBar","SidebarCalendar","Day","pageDay","pageDayContent","AllMessages","pathWithSlash","useLocation","pathname","substring","allItems","overflow","display","flexDirection","dataLength","next","inverse","hasMore","loader","scrollableTarget","index","Notes","button","Header","changeType","headerContainer","headerLogo","logo","headerDate","headerNavigationBlock","headerNavigation","headerNavigationItem","headerNavigationItemCenter","signOut","catch","headerLogout","App","onAuthStateChanged","photoURL","userFirebase","merge","Container","container","maxWidth","exact","authenticated","component","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","app","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.171bd262.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"spiner_spinner__2Qa-P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"note_editor__3Nu_m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"sidebarCalendar_icon__3OneK\",\"logo\":\"sidebarCalendar_logo__U9_xQ\",\"row\":\"sidebarCalendar_row__1z4xl\",\"row-middle\":\"sidebarCalendar_row-middle__1zIRu\",\"col\":\"sidebarCalendar_col__2aYcO\",\"colStart\":\"sidebarCalendar_colStart__ROUJ2\",\"colCenter\":\"sidebarCalendar_colCenter__mKAy7\",\"colEnd\":\"sidebarCalendar_colEnd__3q6ec\",\"calendar\":\"sidebarCalendar_calendar__2DAvq\",\"header\":\"sidebarCalendar_header__3j7XO\",\"days\":\"sidebarCalendar_days__g_P4S\",\"cell\":\"sidebarCalendar_cell__13At_\",\"selected\":\"sidebarCalendar_selected__SoXFL\",\"body\":\"sidebarCalendar_body__2R34t\",\"number\":\"sidebarCalendar_number__2wxYQ\",\"disabled\":\"sidebarCalendar_disabled__IAjHI\",\"bg\":\"sidebarCalendar_bg__1jVXe\",\"selectedDay\":\"sidebarCalendar_selectedDay__1J9P-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageDaySideBar\":\"sidebar_pageDaySideBar__25beE\"};","module.exports = __webpack_public_path__ + \"static/media/logo.cb130adb.svg\";","module.exports = __webpack_public_path__ + \"static/media/signOut.05fcdd59.svg\";","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","export const changeFormatDate = (timestamp = new Date(), divide = '') => {\n  const d = new Date(timestamp);\n  return `${d.getDate()}${divide}${\n    d.getMonth() + 1\n  }${divide}${d.getFullYear()}`;\n};\nexport const changeReverseFormatDate = (timestamp = new Date()) => {\n  const d = new Date(timestamp);\n  return `${d.getFullYear()}/${d.getMonth() + 1}/${d.getDate()}`;\n};\n\nexport const reverseFormatDate = (timestamp = new Date()) => {\n  const d = new Date(timestamp);\n  return `[${d.getFullYear()}][${d.getMonth() + 1}][${d.getDate()}]`;\n};\n\nexport const formatDate = (date = new Date()) => {\n  // return ('0' +(date.getDate())).slice(-2)+('0' +(date.getMonth()+1)).slice(-2)+('0'+date.getFullYear()).slice(-4);\n  return `${date.getDate()}${date.getMonth() + 1}${date.getFullYear()}`;\n};\n","import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/database';\r\nimport 'firebase/auth';\r\n\r\nconst config = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n};\r\n\r\nfirebase.initializeApp(config);\r\n\r\nconst auth = firebase.auth;\r\nconst db = firebase.firestore();\r\nconst rtdb = firebase.database();\r\n\r\nexport function setupPresence(user) {\r\n  const isOfflineForRTDB = {\r\n    state: 'offline',\r\n    lastChanged: firebase.database.ServerValue.TIMESTAMP,\r\n  };\r\n\r\n  const isOnlineForRTDB = {\r\n    state: 'online',\r\n    lastChanged: firebase.database.ServerValue.TIMESTAMP,\r\n  };\r\n\r\n  const isOfflineForFirestore = {\r\n    state: 'offline',\r\n    lastChanged: firebase.firestore.FieldValue.serverTimestamp(),\r\n  };\r\n\r\n  const isOnlineForFirestore = {\r\n    state: 'online',\r\n    lastChanged: firebase.firestore.FieldValue.serverTimestamp(),\r\n  };\r\n\r\n  const rtdbRef = rtdb.ref(`/status/${user.uid}`);\r\n  const userDoc = db.doc(`/users/${user.uid}`);\r\n\r\n  rtdb.ref('.info/connected').on('value', async (snapshot) => {\r\n    if (snapshot.val() === false) {\r\n      userDoc.update({\r\n        status: isOfflineForFirestore,\r\n      });\r\n      return;\r\n    }\r\n\r\n    await rtdbRef.onDisconnect().set(isOfflineForRTDB);\r\n    rtdbRef.set(isOnlineForRTDB);\r\n    userDoc.update({\r\n      status: isOnlineForFirestore,\r\n    });\r\n  });\r\n}\r\n\r\nexport { db, rtdb, firebase, auth };\r\n","import { BaseThunkType, InferActionsTypes } from './index'\r\nimport { db } from '../services/firebase'\r\nimport { changeFormatDate } from '../helpers/changeFormatDate'\r\n\r\nconst initialState = {\r\n  allNotes: [] as [],\r\n  allAwareness: [] as [],\r\n  allNotesMonth: [] as Array<{}>,\r\n  todayNotes: [] as any,\r\n  loadingNotes: true as boolean,\r\n  lastSnapshotNote: null as number | null,\r\n  lastSnapshotAware: null as number | null,\r\n\r\n  runOutOfNotes: true as boolean,\r\n  errorNotes: null as null | string,\r\n  content: '' as string,\r\n  itemDate: '' as string,\r\n  key: null as number | null,\r\n  dataNewDay: null as null | number,\r\n  typePage: 'note' as string,\r\n}\r\n\r\nexport const notesReducer = (state = initialState, action: ActionsType) => {\r\n  switch (action.type) {\r\n    case 'AW/NOTE/FETCH_NOTES_REQUEST':\r\n    case 'AW/NOTE/FETCH_NOTES_FAILURE':\r\n    case 'AW/NOTE/FETCH_NOTES_DAY':\r\n    case 'AW/NOTE/FETCH_NOTES_ALL':\r\n    case 'AW/NOTE/FETCH_AWARENESS_ALL':\r\n    case 'AW/NOTE/SET_LAST_NOTES':\r\n    case 'AW/NOTE/SET_LAST_AWARENESS':\r\n    case 'AW/NOTE/FINISH_SCROLL_NOTES':\r\n    case 'AW/NOTE/FETCH_NOTES_MONTHS':\r\n    case 'AW/NOTE/SET_DATE_ITEM':\r\n    case 'AW/NOTE/SET_TYPE_PAGE':\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  noteRequested: () =>\r\n    ({\r\n      type: 'AW/NOTE/FETCH_NOTES_REQUEST',\r\n      payload: {\r\n        todayNotes: [],\r\n        loadingNotes: true,\r\n        errorNotes: null,\r\n      },\r\n    } as const),\r\n  noteError: (error: string) =>\r\n    ({\r\n      type: 'AW/NOTE/FETCH_NOTES_FAILURE',\r\n      payload: {\r\n        todayNotes: [],\r\n        loadingNotes: false,\r\n        errorNotes: error,\r\n      },\r\n    } as const),\r\n  getNotesDay: (todayNotes: []) =>\r\n    ({\r\n      type: 'AW/NOTE/FETCH_NOTES_DAY',\r\n      payload: {\r\n        loadingNotes: false,\r\n        errorNotes: null,\r\n        todayNotes,\r\n      },\r\n    } as const),\r\n  getAllNotesMonth: (allNotesMonth: []) =>\r\n    ({\r\n      type: 'AW/NOTE/FETCH_NOTES_MONTHS',\r\n      payload: {\r\n        loadingNotes: false,\r\n        errorNotes: null,\r\n        allNotesMonth,\r\n      },\r\n    } as const),\r\n  getAllNotes: (allNotes: []) =>\r\n    ({\r\n      type: 'AW/NOTE/FETCH_NOTES_ALL',\r\n      payload: {\r\n        loadingNotes: false,\r\n        errorNotes: null,\r\n        allNotes,\r\n      },\r\n    } as const),\r\n  getAllAwareness: (allAwareness: []) =>\r\n  ({\r\n    type: 'AW/NOTE/FETCH_AWARENESS_ALL',\r\n    payload: {\r\n      loadingNotes: false,\r\n      errorNotes: null,\r\n      allAwareness,\r\n    },\r\n  } as const),\r\n  setLastNotes: (lastSnapshotNote: number | null) =>\r\n    ({\r\n      type: 'AW/NOTE/SET_LAST_NOTES',\r\n      payload: {\r\n        loadingNotes: false,\r\n        errorNotes: null,\r\n        lastSnapshotNote,\r\n      },\r\n    } as const),\r\n  setLastAwareness: (lastSnapshotAware: number | null) =>\r\n    ({\r\n      type: 'AW/NOTE/SET_LAST_AWARENESS',\r\n      payload: {\r\n        loadingNotes: false,\r\n        errorNotes: null,\r\n        lastSnapshotAware,\r\n      },\r\n    } as const),\r\n  finishScroll: (runOutOfNotes: boolean) =>\r\n    ({\r\n      type: 'AW/NOTE/FINISH_SCROLL_NOTES',\r\n      payload: {\r\n        loadingNotes: false,\r\n        errorNotes: null,\r\n        runOutOfNotes,\r\n      },\r\n    } as const),\r\n  getDateNewDay: (dataNewDay: number) =>\r\n    ({\r\n      type: 'AW/NOTE/GET_DATE_NEW_DAY',\r\n      payload: {\r\n        dataNewDay,\r\n      },\r\n    } as const),\r\n  setDateItem: (itemDate: string) =>\r\n    ({\r\n      type: 'AW/NOTE/SET_DATE_ITEM',\r\n      payload: {\r\n        itemDate,\r\n      },\r\n    } as const),\r\n  setTypePage: (typePage: string) =>\r\n    ({\r\n      type: 'AW/NOTE/SET_TYPE_PAGE',\r\n      payload: {\r\n        typePage,\r\n      },\r\n    } as const),\r\n}\r\n\r\nexport const changeItemDate = (itemDate: string): ThunkType => async (dispatch) => {\r\n  dispatch(actions.setDateItem(itemDate))\r\n}\r\n\r\nexport const getNotesSelectedDay = (): ThunkType => async (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  const selectedDate = changeFormatDate(getState().calendar.selectedDate, '')\r\n  const userUid = getState().auth.uid\r\n  try {\r\n    const notesArray = [] as any\r\n    const allMessages = db.collection(`${userUid}/${selectedDate}/notes`)\r\n    const allMessagesToday = await allMessages.get()\r\n    for (const doc of allMessagesToday.docs) {\r\n      notesArray.push({...doc.data(), key: doc.id})\r\n    }\r\n\r\n    notesArray.sort((a: { id: number }, b: { id: number }) => a.id - b.id)\r\n    dispatch(actions.getNotesDay(notesArray))\r\n  } catch (error) {\r\n    dispatch(actions.noteError(error))\r\n  }\r\n}\r\n\r\nexport const getAllNotes = (path: string): ThunkType => async (dispatch, getState) => {\r\n  const userUid = getState().auth.uid\r\n  const lastSnapshotNote = getState().notes.lastSnapshotNote as number | null\r\n  const lastSnapshotAware = getState().notes.lastSnapshotAware as number | null\r\n  let lastSnapshot = path === 'note' ? lastSnapshotNote : lastSnapshotAware\r\n  const allNotes = getState().notes.allNotes as []\r\n  const allAware = getState().notes.allAwareness as []\r\n  let all = path === 'note' ? allNotes : allAware\r\n  const allNotesArray = [] as any\r\n  console.log(allNotes)\r\n  let first = db.collectionGroup('notes')\r\n    .where('uid', '==', userUid)\r\n    .where('type', '==', path)\r\n    .orderBy('id', 'desc')\r\n    .limit(8)\r\n  if (lastSnapshot) {\r\n    first = first.startAfter(lastSnapshot)\r\n  }\r\n  const snapshot = await first.get()\r\n  const last = snapshot.docs[snapshot.docs.length - 1]\r\n\r\n  snapshot.docs.forEach((doc) => {\r\n    allNotesArray.push({...doc.data(), key: doc.id})\r\n  })\r\n\r\n  if (last && last.data().id) {\r\n    const newArray: any = all.concat(allNotesArray)\r\n    path === 'note' ? dispatch(actions.getAllNotes(newArray)) : dispatch(actions.getAllAwareness(newArray))\r\n    path === 'note' ? dispatch(actions.setLastNotes(last.data().id)) : dispatch(actions.setLastAwareness(last.data().id))\r\n  }\r\n\r\n  if (snapshot && last === undefined) {\r\n    dispatch(actions.finishScroll(false))\r\n  }\r\n}\r\n\r\nexport const changeTypePage = (typePage: string): ThunkType => async (dispatch) => {\r\n  dispatch(actions.setTypePage(typePage))\r\n  // dispatch(actions.getAllNotes([]))\r\n\r\n  dispatch(getAllNotes(typePage))\r\n  // dispatch(actions.setLastNotes(null))\r\n  dispatch(actions.finishScroll(true))\r\n}\r\n\r\nexport const updateAllNotes = (keyNote: string | undefined = ''): ThunkType => async (\r\n  dispatch,\r\n  getState,\r\n) => {\r\n  const selectedDate = changeFormatDate(getState().calendar.selectedDate, '')\r\n  const itemData = getState().notes.itemDate as string | ''\r\n  const isDate = itemData ? itemData : selectedDate\r\n  const userUid = getState().auth.uid\r\n  const allNotes = getState().notes.allNotes as []\r\n  const allAwareness = getState().notes.allAwareness as []\r\n\r\n  const messages = await db.doc(`${userUid}/${isDate}/notes/${keyNote}`).get()\r\n  const newObj: any = {...messages.data(), key: messages.id}\r\n  let all = newObj.type === 'note' ? allNotes : allAwareness\r\n  const newArray: any = all.filter((item: { id: string; key: string }) => {\r\n    if (messages.data() === undefined && item.key === newObj.key) {\r\n      return false\r\n    }\r\n    return item\r\n  }).map((item: { id: string }) => {\r\n    if (item.id === newObj.id) {\r\n      return newObj\r\n    }\r\n    return item\r\n  })\r\n  if (keyNote) {\r\n    newObj.type === 'note' ? dispatch(actions.getAllNotes(newArray)) : dispatch(actions.getAllAwareness(newArray))\r\n  }\r\n}\r\n\r\nexport const addNewNote = (content: string): ThunkType => async (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  const userUid = getState().auth.uid\r\n  const selectType = getState().editor.selectedType\r\n  const typePage = getState().notes.typePage\r\n  const todayDate = changeFormatDate(new Date(), '')\r\n\r\n  try {\r\n    await db.collection(`${userUid}/${todayDate}/notes`).add({\r\n      createdAt: new Date(),\r\n      type: selectType,\r\n      date: todayDate,\r\n      content,\r\n      id: Date.now(),\r\n      uid: userUid,\r\n    })\r\n    dispatch(getNotesSelectedDay())\r\n    dispatch(actions.getAllNotes([]))\r\n    dispatch(actions.setLastNotes(0))\r\n    dispatch(getAllNotes(typePage))\r\n  } catch (error) {\r\n    dispatch(actions.noteError(error))\r\n  }\r\n}\r\n\r\nexport const updateNote = (\r\n  newContent: string,\r\n  keyNote: string,\r\n): ThunkType => async (dispatch, getState) => {\r\n  const userUid = getState().auth.uid\r\n  const itemData = getState().notes.itemDate as string\r\n\r\n  try {\r\n    await db\r\n      .doc(`${userUid}/${itemData}/notes/${keyNote}`)\r\n      .update({\r\n        content: newContent,\r\n      })\r\n      .then(() => {\r\n        dispatch(getNotesSelectedDay())\r\n        dispatch(updateAllNotes(keyNote))\r\n      })\r\n  } catch (error) {\r\n    dispatch(actions.noteError(error))\r\n  }\r\n}\r\n\r\nexport const deleteNote = (key: string, type: string, date: string): ThunkType => async (\r\n  dispatch,\r\n  getState\r\n) => {\r\n\r\n  const userUid = getState().auth.uid\r\n  try {\r\n    await db.doc(`${userUid}/${date}/notes/${key}`).delete()\r\n    dispatch(getNotesSelectedDay())\r\n    dispatch(updateAllNotes(key))\r\n  } catch (error) {\r\n    dispatch(actions.noteError(error))\r\n  }\r\n}\r\n\r\nexport const getAllNotesMonth = (): ThunkType => async (dispatch, getState) => {\r\n  const userUid = getState().auth.uid\r\n  const arrDate: string[] = []\r\n  try {\r\n    const allDay = await db.collection(userUid).get()\r\n    allDay.forEach((doc) => {\r\n      arrDate.push(doc.id)\r\n    })\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n\r\n  try {\r\n    const notesArray = [] as any\r\n    for (let i = 0; i < arrDate.length; i++) {\r\n      const allNotes = await db\r\n        .collection(`${userUid}/${arrDate[i]}/notes`)\r\n        .get()\r\n      for (const doc of allNotes.docs) {\r\n        notesArray.push({...doc.data(), key: doc.id})\r\n      }\r\n    }\r\n    dispatch(actions.getAllNotesMonth(notesArray))\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\ntype ThunkType = BaseThunkType<ActionsType>;\r\n","import {\n  FETCH_DATA_FAILURE,\n  FETCH_DATA_REQUEST,\n  FETCH_DATA_SUCCESS,\n  FETCH_TODAY_NUMBER,\n} from './actionTypes';\nimport { getNotesSelectedDay } from './noteReducer';\n\nconst initialState = {\n  selectedDate: null,\n  todayData: [],\n  loadingData: true,\n  errorData: null,\n};\n\nconst calendarReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case FETCH_DATA_REQUEST:\n      return {\n        ...state,\n        todayData: [],\n        loadingData: true,\n        errorData: null,\n      };\n    case FETCH_DATA_SUCCESS:\n      return {\n        ...state,\n        todayData: action.payload,\n        loadingData: false,\n        errorData: null,\n      };\n    case FETCH_TODAY_NUMBER:\n      return {\n        ...state,\n        selectedDate: action.payload,\n      };\n    case FETCH_DATA_FAILURE:\n      return {\n        ...state,\n        todayData: [],\n        loadingData: false,\n        errorData: action.payload,\n      };\n    default:\n      return state;\n  }\n};\nconst dataRequested = () => ({ type: FETCH_DATA_REQUEST });\n\nexport const setTodayNumber = (day) => {\n  return {\n    type: 'FETCH_TODAY_NUMBER',\n    payload: day,\n  };\n};\n\nexport const fetchToDayData = (day) => async (dispatch, getState) => {\n  dispatch(dataRequested());\n  dispatch(setTodayNumber(day));\n  dispatch(getNotesSelectedDay(day));\n};\n\nexport default calendarReducer;\n","export const  INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS'\r\nexport const  FETCH_SMILES_REQUEST = 'FETCH_SMILES_REQUEST'\r\nexport const  FETCH_SMILES_SUCCESS = 'FETCH_SMILES_SUCCESS'\r\nexport const  FETCH_SMILES_FAILURE = 'FETCH_SMILES_FAILURE'\r\nexport const  FETCH_SMILE_TODAY_SUCCESS = 'FETCH_SMILE_TODAY_SUCCESS'\r\n\r\nexport const  FETCH_DATA_REQUEST = 'FETCH_DATA_REQUEST'\r\nexport const  FETCH_DATA_SUCCESS = 'FETCH_DATA_SUCCESS'\r\nexport const  FETCH_DATA_FAILURE = 'FETCH_DATA_FAILURE'\r\nexport const  FETCH_TODAY_NUMBER = 'FETCH_TODAY_NUMBER'\r\n\r\n\r\nexport const  FETCH_NOTES_REQUEST = 'FETCH_NOTES_REQUEST'\r\nexport const  FETCH_NOTES_FAILURE = 'FETCH_NOTES_FAILURE'\r\nexport const  FETCH_NOTES_DAY = 'FETCH_NOTES_DAY'\r\nexport const  ADD_NOTE = 'ADD_NOTE'","import { db, firebase } from '../services/firebase'\r\n\r\nimport { BaseThunkType, InferActionsTypes } from './index';\r\nimport { changeFormatDate } from '../helpers/changeFormatDate'\r\n\r\n\r\nconst initialState = {\r\n  allActivity: [] as [],\r\n  loadingActivity: true,\r\n  errorActivity: null,\r\n  todayActivity: [] as [],\r\n};\r\n\r\nexport const activeReducer = (state = initialState, action: ActionsType) => {\r\n  switch (action.type) {\r\n    case 'AW/ACTIVITY/FETCH_ACTIVITY_REQUEST':\r\n    case 'AW/ACTIVITY/FETCH_ACTIVITY_TODAY_SUCCESS':\r\n    case 'AW/ACTIVITY/FETCH_ACTIVITY_SUCCESS':\r\n    case 'AW/ACTIVITY/FETCH_ACTIVITY_FAILURE':\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst actions = {\r\n  activityRequested: () =>\r\n    ({\r\n      type: 'AW/ACTIVITY/FETCH_ACTIVITY_REQUEST',\r\n      payload: {\r\n        todayActivity: [],\r\n        loadingActivity: true,\r\n        errorActivity: null,\r\n      },\r\n    } as const),\r\n  activityTodayLoaded: (array: any) =>\r\n    ({\r\n      type: 'AW/ACTIVITY/FETCH_ACTIVITY_TODAY_SUCCESS',\r\n      payload: {\r\n        todayActivity: array,\r\n        loadingActivity: false,\r\n        errorActivity: null,\r\n      },\r\n    } as const),\r\n  activityAllLoaded: (activity: Array<string>) =>\r\n    ({\r\n      type: 'AW/ACTIVITY/FETCH_ACTIVITY_SUCCESS',\r\n      payload: {\r\n        allActivity: activity,\r\n        loadingActivity: false,\r\n        errorActivity: null,\r\n      },\r\n    } as const),\r\n  activityError: (error: string) =>\r\n    ({\r\n      type: 'AW/ACTIVITY/FETCH_ACTIVITY_FAILURE',\r\n      payload: {\r\n        todayActivity: [],\r\n        loadingActivity: false,\r\n        errorActivity: error,\r\n      },\r\n    } as const)\r\n};\r\n\r\nexport const fetchActivity = (): ThunkType => async (dispatch, getState) => {\r\n  const userUid = getState().auth.uid;\r\n  try {\r\n    db.collection(userUid).onSnapshot((querySnapshot) => {\r\n      const activity: any = [] ;\r\n      querySnapshot.forEach((doc) => {\r\n        activity.push({ [doc.id]: doc.data() });\r\n      });\r\n      dispatch(actions.activityAllLoaded(activity));\r\n    });\r\n  } catch (error) {\r\n    dispatch(actions.activityError(error));\r\n  }\r\n};\r\n\r\nexport const fetchToDayActivity = (): ThunkType => async (dispatch, getState) => {\r\n  const selectedDate = changeFormatDate(getState().calendar.selectedDate, '');\r\n  const userUid = getState().auth.uid;\r\n  dispatch(actions.activityRequested());\r\n\r\n  try {\r\n    db.collection(userUid)\r\n      .doc(selectedDate)\r\n      .onSnapshot(async (querySnapshot ) => {\r\n        const data = await querySnapshot.data()\r\n\r\n        if (data) {\r\n          dispatch(actions.activityTodayLoaded(data.activity));\r\n        }\r\n      });\r\n  } catch (error) {\r\n    dispatch(actions.activityError(error));\r\n  }\r\n};\r\n\r\nexport const addActivity = (name: string): ThunkType => async (dispatch, getState) => {\r\n  const selectedDate = changeFormatDate(getState().calendar.selectedDate, '');\r\n  const isTodayActivity: { todayActivity: [] } = getState().active\r\n\r\n  const today = changeFormatDate(new Date(), '');\r\n  const userUid = getState().auth.uid;\r\n\r\n  if (today !== selectedDate) {\r\n    return;\r\n  }\r\n\r\n  const activityRef = db.collection(userUid).doc(selectedDate);\r\n\r\n  try {\r\n    if (isTodayActivity.todayActivity.length) {\r\n      await activityRef.update({\r\n        activity: firebase.firestore.FieldValue.arrayUnion(name),\r\n      });\r\n    } else {\r\n      await activityRef.set({\r\n        activity: firebase.firestore.FieldValue.arrayUnion(name),\r\n      });\r\n    }\r\n  } catch (error) {\r\n    dispatch(actions.activityError(error));\r\n  }\r\n};\r\n\r\nexport const removeActivity = (name: string): ThunkType => async (dispatch, getState) => {\r\n  const selectedDate = changeFormatDate(getState().calendar.selectedDate, '');\r\n  const today = changeFormatDate(new Date(), '');\r\n  const userUid = getState().auth.uid;\r\n\r\n  if (today !== selectedDate) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await db\r\n      .collection(userUid)\r\n      .doc(selectedDate)\r\n      .update({\r\n        activity: firebase.firestore.FieldValue.arrayRemove(name),\r\n      });\r\n  } catch (error) {\r\n    dispatch(actions.activityError(error));\r\n  }\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\ntype ThunkType = BaseThunkType<ActionsType>;","import { BaseThunkType, InferActionsTypes } from './index';\nimport { addNewNote, getAllNotes } from './noteReducer'\n\nconst initialState = {\n  activeEditor: false as boolean,\n  selectedType: 'note' as string,\n  content: '' as string,\n  activeEditorChangeOldContent: false as boolean,\n  activeFillEditor: true as boolean,\n  activeModal: false as boolean,\n  key: '' as string,\n};\n\nexport const editorReducer = (state = initialState, action: ActionsType) => {\n  switch (action.type) {\n    case 'AW/EDITOR/ACTIVE_EDITOR':\n    case 'AW/EDITOR/CHANGE_TYPE':\n    case 'AW/EDITOR/CHANGE_CONTENT':\n    case 'AW/EDITOR/CHANGE_CONTENT_OLD':\n    case 'AW/EDITOR/ACTIVE_MODAL':\n    case 'AW/EDITOR/SET_KEY_MESSAGE':\n      return {\n        ...state,\n        ...action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nconst actions = {\n  activeEditor: (activeEditor: boolean) =>\n    ({\n      type: 'AW/EDITOR/ACTIVE_EDITOR',\n      payload: {\n        activeEditor,\n      },\n    } as const),\n  changeType: (selectedType: string) =>\n    ({\n      type: 'AW/EDITOR/CHANGE_TYPE',\n      payload: {\n        selectedType,\n      },\n    } as const),\n  changeContent: (content: string) =>\n    ({\n      type: 'AW/EDITOR/CHANGE_CONTENT',\n      payload: {\n        content,\n      },\n    } as const),\n  changeContentOld: (activeEditorChangeOldContent: boolean) =>\n    ({\n      type: 'AW/EDITOR/CHANGE_CONTENT_OLD',\n      payload: {\n        activeEditorChangeOldContent,\n      },\n    } as const),\n  toggleEditor: (activeFillEditor: boolean) =>\n    ({\n      type: 'AW/EDITOR/ACTIVE_EDITOR',\n      payload: {\n        activeFillEditor,\n      },\n    } as const),\n  toggleModal: (activeModal: boolean) =>\n    ({\n      type: 'AW/EDITOR/ACTIVE_MODAL',\n      payload: {\n        activeModal,\n      },\n    } as const),\n  setKey: (key: string) =>\n    ({\n      type: 'AW/EDITOR/SET_KEY_MESSAGE',\n      payload: {\n        key,\n      },\n    } as const),\n};\n\nexport const activeStateEditor = (state: boolean): ThunkType => async (\n  dispatch,\n) => {\n  dispatch(actions.activeEditor(state));\n};\n\nexport const changeSelectedType = (selected: string): ThunkType => async (\n  dispatch,\n) => {\n  dispatch(actions.changeType(selected));\n};\n\nexport const changeEditorContent = (text: string): ThunkType => async (\n  dispatch,\n) => {\n  dispatch(actions.changeContent(text));\n};\n\nexport const toggleEditorOldContent = (isContent = true): ThunkType => async (\n  dispatch,\n) => {\n  dispatch(actions.changeContentOld(isContent));\n  dispatch(actions.activeEditor(false));\n};\n\nexport const toggleActiveFillEditor = (\n  activeFillEditor: boolean,\n): ThunkType => async (dispatch) => {\n  dispatch(actions.toggleEditor(activeFillEditor));\n};\n\nexport const toggleActiveModal = (activeModal: boolean): ThunkType => async (\n  dispatch,\n) => {\n  dispatch(actions.toggleModal(activeModal));\n};\n\nexport const setKey = (key: string): ThunkType => async (dispatch) => {\n  dispatch(actions.setKey(key));\n  dispatch(actions.changeContentOld(true));\n};\n\nexport const saveContent = (text: string): ThunkType => async (\n  dispatch,\n  getState,\n) => {\n  const typePage = getState().notes.typePage\n  if (getState().editor.activeEditorChangeOldContent) {\n    dispatch(actions.toggleModal(true));\n  } else {\n    dispatch(addNewNote(text));\n    dispatch(actions.toggleModal(false));\n    dispatch(actions.changeContentOld(false));\n    dispatch(getAllNotes(typePage))\n  }\n};\n\ntype InitialStateType = typeof initialState;\ntype ActionsType = InferActionsTypes<typeof actions>;\ntype ThunkType = BaseThunkType<ActionsType>;\n","import { shallowEqual, useSelector } from 'react-redux';\r\nimport {AppStateType} from \"../store\";\r\n\r\n// export const useShallowEqualSelector = (selector) => {\r\n//   return useSelector(selector, shallowEqual);\r\n// }\r\n\r\nexport default <TReturn,>(selector: (state: AppStateType) => TReturn) =>\r\n  useSelector<AppStateType, TReturn>(selector, shallowEqual);\r\n","import React, { FC, useEffect, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport {\r\n  format,\r\n  startOfWeek,\r\n  endOfMonth,\r\n  addDays,\r\n  startOfMonth,\r\n  endOfWeek,\r\n  isSameMonth,\r\n  isSameDay,\r\n  addMonths,\r\n  subMonths,\r\n  isFuture,\r\n} from 'date-fns';\r\nimport { ru } from 'date-fns/locale';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport styles from './Calendar.module.css';\r\n\r\nimport { changeFormatDate } from '../../helpers/changeFormatDate';\r\nimport { fetchToDayData } from '../../store/calendarReducer';\r\nimport { fetchActivity } from '../../store/activityReducer';\r\nimport { getAllNotesMonth } from '../../store/noteReducer';\r\nimport {\r\n  toggleEditorOldContent,\r\n  changeEditorContent,\r\n  toggleActiveFillEditor,\r\n} from '../../store/editorReducer';\r\nimport SpaIcon from '@material-ui/icons/Spa';\r\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\r\nimport useShallowEqualSelector from '../../hooks/useShallowEqualSelector';\r\nimport { AppStateType } from '../../store'\r\n\r\nconst Calendar: FC = () => {\r\n  const [currentMonth, setCurrentMonth] = useState(new Date());\r\n  const history = useHistory();\r\n  const selectedDate = new Date();\r\n  const allActivity = useShallowEqualSelector((state: {active: {allActivity: []}} ) => state.active.allActivity);\r\n  const allNotesMonth = useShallowEqualSelector((state: AppStateType) => state.notes.allNotesMonth);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchToDayData());\r\n    dispatch(getAllNotesMonth());\r\n    dispatch(fetchActivity());\r\n  }, [dispatch]);\r\n\r\n  const renderHeader = () => {\r\n    const dateFormat = 'LLLL yyyy';\r\n    return (\r\n      <div className={`${styles.header} ${styles.row}`}>\r\n        <div className={`${styles.col} ${styles.colStart}`}>\r\n          <div className={`${styles.icon}`} onClick={prevMonth}>\r\n            chevron_left\r\n          </div>\r\n        </div>\r\n        <div className={`${styles.col}  ${styles.colCenter}`}>\r\n          <span>{format(currentMonth, dateFormat, { locale: ru })}</span>\r\n        </div>\r\n        <div className={`${styles.col} ${styles.colEnd}`} onClick={nextMonth}>\r\n          <div className={`${styles.icon}`}>chevron_right</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderDays = () => {\r\n    const dateFormat = 'EEEE';\r\n    const days = [];\r\n    let startDate = startOfWeek(currentMonth, { weekStartsOn: 1 });\r\n    for (let i = 0; i < 7; i++) {\r\n      let dayWek = format(addDays(startDate, i), dateFormat, { locale: ru });\r\n      days.push(\r\n        <div className={`${styles.col} ${styles.colCenter} `} key={i}>\r\n          {dayWek}\r\n        </div>\r\n      );\r\n    }\r\n    return <div className={`${styles.days} ${styles.row}`}>{days}</div>;\r\n  };\r\n\r\n  const renderCells = () => {\r\n    const monthStart = startOfMonth(currentMonth);\r\n    const monthEnd = endOfMonth(monthStart);\r\n    const startDate = startOfWeek(monthStart, { weekStartsOn: 1 });\r\n    const endDate = endOfWeek(monthEnd);\r\n\r\n    const dateFormat = 'd';\r\n    const rows = [];\r\n\r\n    let days = [];\r\n    let day = startDate;\r\n    let formattedDate = '';\r\n\r\n    while (day <= endDate) {\r\n      for (let i = 0; i < 7; i++) {\r\n        formattedDate = format(day, dateFormat);\r\n        const cloneDay = day;\r\n\r\n\r\n        const onDateClick = (day: Date | undefined) => {\r\n          history.push(`/day/${changeFormatDate(day)}`);\r\n          dispatch(fetchToDayData(day));\r\n          dispatch(toggleEditorOldContent(false));\r\n          dispatch(changeEditorContent(''));\r\n          dispatch(toggleActiveFillEditor(true));\r\n\r\n        };\r\n        const year = cloneDay.getFullYear();\r\n        const mount = cloneDay.getMonth() + 1;\r\n        const today = cloneDay.getDate();\r\n\r\n        const activitiesToday = allActivity.map((item: any) => {\r\n          return Object.keys(item).map(i => {\r\n            if (i === `${today}${mount}${year}`) {\r\n              const meditation = item[i].activity.includes('Meditation') ? (\r\n                <Brightness7Icon\r\n                  className={styles.activity}\r\n                  style={{ color: '#F6A4D5' }}\r\n                />\r\n              ) : null;\r\n\r\n              const yoga = item[i].activity.includes('Yoga') ? (\r\n                <SpaIcon style={{ color: '#F6A4D5' }} />\r\n              ) : null;\r\n\r\n              return (\r\n                <div key={i} className={`${styles.allActivity}`}>\r\n                  <span className={styles.activity}>{meditation}</span>\r\n                  <span className={styles.activity}>{yoga}</span>\r\n                </div>\r\n              );\r\n            }\r\n            return null\r\n          });\r\n        });\r\n\r\n        const notesToday = allNotesMonth.filter((item: any) => {\r\n         return item.date === `${today}${mount}${year}` && item.type === 'note' && item\r\n        });\r\n        const awarenesToday = allNotesMonth.filter((item: any) => {\r\n          return item.date === `${today}${mount}${year}` &&\r\n            typeof item.content === 'string' && item.type === 'awareness' && item\r\n\r\n        });\r\n\r\n        days.push(\r\n          <div\r\n            className={`${styles.col} ${styles.cell}\r\n              ${\r\n                !isSameMonth(day, monthStart)\r\n                  ? `disabled ${styles.disabled}`\r\n                  : isSameDay(day, selectedDate)\r\n                  ? `selected ${styles.selected}`\r\n                  : ''\r\n              }\r\n              ${isFuture(day) ? `disabled ${styles.disabled}` : ''}\r\n            `}\r\n            key={day.toString()}\r\n            onClick={() => onDateClick(cloneDay)}\r\n          >\r\n            <span className={`${styles.number}`}>{formattedDate}</span>\r\n            <span className={`${styles.activities}`}>{activitiesToday}</span>\r\n            {notesToday.length !== 0 ? <span className={`${styles.notesToday}`}>N: {notesToday.length}</span>: null}\r\n            {awarenesToday.length !== 0 ?<span className={`${styles.awarenesToday}`}>A: {awarenesToday.length}</span>: null}\r\n            <span className={`${styles.bg}`}>{formattedDate}</span>\r\n          </div>\r\n        );\r\n        day = addDays(day, 1);\r\n      }\r\n      rows.push(\r\n        <div className={`${styles.row}`} key={day.toString()}>\r\n          {days}\r\n        </div>\r\n      );\r\n      days = [];\r\n    }\r\n    return <div className={`${styles.body}`}>{rows}</div>;\r\n  };\r\n\r\n  const nextMonth = () => {\r\n    setCurrentMonth(addMonths(currentMonth, 1));\r\n  };\r\n\r\n  const prevMonth = () => {\r\n    setCurrentMonth(subMonths(currentMonth, 1));\r\n  };\r\n\r\n  return (\r\n    <div className={`${styles.calendar}`}>\r\n      {renderHeader()}\r\n      {renderDays()}\r\n      {renderCells()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Calendar;\r\n","import React, { FC } from 'react';\r\nimport Calendar from '../component/calendar/Calendar';\r\n\r\nexport const Home: FC = (props) => {\r\n  return (\r\n    <div>\r\n      <section>\r\n        <Calendar {...props} />\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n","import { firebase, db, auth, setupPresence } from '../services/firebase';\nimport { useState, useEffect } from 'react';\n\nexport function signup(email, password) {\n  return auth().createUserWithEmailAndPassword(email, password);\n}\n\nexport function signin(email, password) {\n  return auth().signInWithEmailAndPassword(email, password);\n}\n\nexport function signInWithGoogle() {\n  const provider = new auth.GoogleAuthProvider();\n  return auth().signInWithPopup(provider);\n}\n\nexport function useAuth() {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    return firebase.auth().onAuthStateChanged((firebaseUser) => {\n      if (firebaseUser) {\n        const user = {\n          displayName: firebaseUser.displayName,\n          photoUrl: firebaseUser.photoURL,\n          uid: firebaseUser.uid,\n        };\n        setUser(user);\n\n        db.collection('users').doc(user.uid).set(user, { merge: true });\n\n        setupPresence(user);\n      } else {\n        setUser(null);\n      }\n    });\n  }, []);\n  return user;\n}\n\n// export function signInWithGitHub() {\n//   const provider = new auth.GithubAuthProvider();\n//   return auth().signInWithPopup(provider);\n// }\n\n// export function logout() {\n//   return auth().signOut();\n// }\n","import React from 'react';\n\nexport const Footer = () => {\n  return (\n    <footer className=\"pt-5\">\n      <div className=\"container text-center\">\n        <p>&copy; Awiary 2020.</p>\n      </div>\n    </footer>\n  );\n};\n","import React, { ChangeEvent, FC, FormEvent, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { signin, signInWithGoogle } from '../../helpers/auth';\r\nimport styles from './Sign.module.css';\r\nimport google from './google.svg';\r\nimport { Footer } from '../../component/Footer'\r\n\r\nexport const Login: FC = () => {\r\n  const [error, setError] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const handleChangeEmail = (event: ChangeEvent<HTMLInputElement>) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n  const handleChangePassword = (event: ChangeEvent<HTMLInputElement>) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = async (event: FormEvent) => {\r\n    event.preventDefault();\r\n    setError('');\r\n    try {\r\n      await signin(email, password);\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  const googleSignIn = async () => {\r\n    try {\r\n      await signInWithGoogle();\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n    <div className={`container ${styles.wrapper}`}>\r\n      <form\r\n        className={`mt-5 py-5 px-5 ${styles.form_box}`}\r\n        autoComplete=\"off\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <h1 className={styles.header_block}>\r\n          Войти в\r\n          <Link className={`${styles.title} ml-2`} to=\"/\">\r\n            Awiary\r\n          </Link>\r\n        </h1>\r\n        <div className=\"form-group\">\r\n          <input\r\n            className=\"form-control\"\r\n            placeholder=\"Email\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            onChange={handleChangeEmail}\r\n            value={email}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            className=\"form-control\"\r\n            placeholder=\"Password\"\r\n            name=\"password\"\r\n            onChange={handleChangePassword}\r\n            value={password}\r\n            type=\"password\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          {error ? <p className=\"text-danger\">{error}</p> : null}\r\n          <button className={`${styles.submit} btn btn-primary px-5`} type=\"submit\">\r\n            Войти\r\n          </button>\r\n        </div>\r\n        <div className={styles.signGoogle}>\r\n          <p>Вы также можете авторизироваться через Google аккаунт</p>\r\n          <button\r\n            className=\"btn btn-danger mr-2\"\r\n            type=\"button\"\r\n            onClick={googleSignIn}\r\n          >\r\n            <img src={google} alt=\"Google\" />\r\n          </button>\r\n        </div>\r\n        <p>\r\n          <Link className={styles.signup} to=\"/signup\">\r\n            Зарегистрироваться\r\n          </Link>\r\n        </p>\r\n      </form>\r\n      <Footer />\r\n    </div>\r\n\r\n      </>\r\n  );\r\n};\r\n","import React, { ChangeEvent, FC, FormEvent, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { signup, signInWithGoogle } from '../../helpers/auth';\r\nimport styles from './Sign.module.css';\r\nimport google from './google.svg';\r\n\r\nexport const SignUp: FC = () => {\r\n  const [error, setError] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const handleChangeEmail = (event: ChangeEvent<HTMLInputElement>) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n  const handleChangePassword = (event: ChangeEvent<HTMLInputElement>) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = async (event: FormEvent) => {\r\n    event.preventDefault();\r\n    setError('');\r\n    try {\r\n      await signup(email, password);\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  const googleSignIn = async () => {\r\n    try {\r\n      await signInWithGoogle();\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n      <div className={`container ${styles.wrapper}`}>\r\n        <form\r\n            className={`mt-5 py-5 px-5 ${styles.form_box}`}\r\n            autoComplete=\"off\"\r\n            onSubmit={handleSubmit}\r\n        >\r\n          <h1 className={styles.header_block}>\r\n            Зарегистрироваться в\r\n            <Link className={`${styles.title} ml-2`} to=\"/\">\r\n              Awiary\r\n            </Link>\r\n          </h1>\r\n          <div className=\"form-group\">\r\n            <input\r\n                className=\"form-control\"\r\n                placeholder=\"Email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                onChange={handleChangeEmail}\r\n                value={email}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n                className=\"form-control\"\r\n                placeholder=\"Password\"\r\n                name=\"password\"\r\n                onChange={handleChangePassword}\r\n                value={password}\r\n                type=\"password\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            {error ? <p className=\"text-danger\">{error}</p> : null}\r\n            <button className={`${styles.submit} btn btn-primary px-5`} type=\"submit\">\r\n              Зарегистрироваться\r\n            </button>\r\n          </div>\r\n          <div className={styles.signGoogle}>\r\n            <p>Вы также можете Зарегистрироваться через Google аккаунт</p>\r\n            <button\r\n                className=\"btn btn-danger mr-2\"\r\n                type=\"button\"\r\n                onClick={googleSignIn}\r\n            >\r\n              <img src={google} alt=\"Google\" />\r\n            </button>\r\n          </div>\r\n          <p>\r\n            <Link className={styles.signup} to=\"/login\">\r\n              Войти\r\n            </Link>\r\n          </p>\r\n        </form>\r\n      </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport styles from './spiner.module.css'\r\n\r\nexport const Spinner = () => {\r\n\r\n  return (\r\n    <div className={styles.spinner}>\r\n      <CircularProgress />\r\n    </div>\r\n  );\r\n};\r\n","import { auth, db, setupPresence } from '../services/firebase';\r\n\r\nimport { BaseThunkType, InferActionsTypes } from './index';\r\n\r\nconst initialState = {\r\n  uid: '' as string,\r\n  email: null as string | null,\r\n  displayName: null as string | null,\r\n  photoUrl: null as string | null,\r\n  loading: true as boolean,\r\n  isAuth: false as boolean,\r\n};\r\n\r\nexport const authReducer = (state = initialState, action: ActionsType) => {\r\n  switch (action.type) {\r\n    case 'AW/AUTH/SET_USER_DATA':\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst actions = {\r\n  setAuthUserData: (\r\n    uid: string,\r\n    email: string | null,\r\n    displayName: string | null,\r\n    photoUrl: string | null,\r\n    loading: boolean,\r\n    isAuth: boolean\r\n  ) =>\r\n    ({\r\n      type: 'AW/AUTH/SET_USER_DATA',\r\n      payload: {\r\n        uid,\r\n        email,\r\n        displayName,\r\n        photoUrl,\r\n        loading,\r\n        isAuth,\r\n      },\r\n    } as const),\r\n};\r\n\r\nexport const getAuthUserData = (): ThunkType => async (dispatch) => {\r\n  auth().onAuthStateChanged((user) => {\r\n    if (user) {\r\n      dispatch(\r\n        actions.setAuthUserData(\r\n          user.uid,\r\n          user.email,\r\n          user.displayName,\r\n          user.photoURL,\r\n          false,\r\n          true,\r\n        )\r\n      );\r\n\r\n      const userFirebase = {\r\n        displayName: user.displayName,\r\n        photoUrl: user.photoURL,\r\n        uid: user.uid,\r\n      };\r\n\r\n      db.collection('users').doc(user.uid).set(userFirebase, { merge: true });\r\n\r\n      setupPresence(user);\r\n    } else {\r\n      dispatch(actions.setAuthUserData('', null, null, null, false, false));\r\n    }\r\n  });\r\n}\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n  auth()\r\n    .signOut()\r\n    .then(() => {\r\n      dispatch(actions.setAuthUserData('', null, null, null, false, false));\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\ntype ThunkType = BaseThunkType<ActionsType>;\r\n","export const validateContent = (content) => {\r\n  let text = content\r\n  if (text && text.length > 0) {\r\n    text = text.replace(/<(?:.|\\n)*?>/gm, '').replace('&nbsp;', '').trim()\r\n    text = text.length ? text.split(/\\s+/).length : 0\r\n  } else {\r\n    text = 0\r\n  }\r\n  // if (text === 0) {\r\n  //   dispatch(changeEditorContent(''))\r\n  // }\r\n}\r\n","import React, { FC } from 'react'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport Fade from '@material-ui/core/Fade'\r\nimport Button from '@material-ui/core/Button'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\n\r\nimport {\r\n  toggleActiveFillEditor,\r\n  toggleActiveModal,\r\n  toggleEditorOldContent,\r\n} from '../../store/editorReducer'\r\nimport { addNewNote, updateNote } from '../../store/noteReducer'\r\nimport { AppStateType } from '../../store'\r\nimport { validateContent } from '../../helpers/validateContent'\r\nimport styles from './modal.module.css'\r\n\r\nexport const SuccessEditModal: FC = () => {\r\n  const dispatch = useDispatch()\r\n  const activeModal = useSelector((state: AppStateType) => state.editor.activeModal)\r\n  const content = useSelector((state: AppStateType) => state.editor.content)\r\n  const key = useSelector((state: AppStateType) => state.editor.key)\r\n  const handleEdit = async () => {\r\n    validateContent(content)\r\n    dispatch(updateNote(content, key))\r\n    dispatch(toggleActiveModal(false))\r\n    dispatch(toggleActiveFillEditor(false))\r\n    dispatch(toggleEditorOldContent(false))\r\n  }\r\n\r\n  const handleCreateNote = async () => {\r\n    validateContent(content)\r\n    if (content !== '') {\r\n      dispatch(addNewNote(content))\r\n      dispatch(toggleActiveModal(false))\r\n      dispatch(toggleEditorOldContent(false))\r\n    }\r\n  }\r\n\r\n  const handleClose = () => {\r\n    dispatch(toggleActiveModal(false))\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        aria-labelledby=\"transition-modal-title\"\r\n        aria-describedby=\"transition-modal-description\"\r\n        className={styles.modal}\r\n        open={activeModal}\r\n        onClose={handleClose}\r\n        closeAfterTransition\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n          timeout: 500,\r\n        }}\r\n      >\r\n        <Fade in={activeModal}>\r\n          <div className={styles.paper}>\r\n            <h2 id=\"transition-modal-title\">Выберите</h2>\r\n            <p id=\"transition-modal-description\">\r\n              Какие действие вы хотите сделать\r\n            </p>\r\n            <div className=\"buttonGroup\">\r\n              <Button variant=\"contained\" color=\"primary\"   onClick={handleEdit}>\r\n                Изменить\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"default\" onClick={handleCreateNote}>\r\n                Создать новый\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </Fade>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\nimport { useDispatch } from 'react-redux'\nimport SunEditor from 'suneditor-react'\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport 'suneditor/dist/css/suneditor.min.css'\nimport { changeEditorContent, saveContent } from '../../store/editorReducer'\nimport useShallowEqualSelector from '../../hooks/useShallowEqualSelector'\nimport { AppStateType } from '../../store'\n\nconst Editor = () => {\n  const content = useShallowEqualSelector((state: AppStateType) => state.editor.content)\n  const activeFillEditor = useShallowEqualSelector((state) => state.editor.activeFillEditor)\n  const dispatch = useDispatch()\n\n  const handleChange = (text: string) => {\n    dispatch(changeEditorContent(text))\n  }\n\n  const handleSaveContent = (text: string) => {\n    dispatch(saveContent(text))\n  }\n  return (\n    <SunEditor\n      hide={activeFillEditor}\n      setContents={content}\n      onChange={handleChange}\n      lang=\"ru\"\n      setOptions={{\n        showPathLabel: false,\n        maxCharCount: 720,\n        width: '100%',\n        height: 'auto',\n        minHeight: '100px',\n        maxHeight: '250px',\n        buttonList: [\n          ['undo', 'redo', 'formatBlock'],\n          ['bold', 'underline', 'italic', 'strike'],\n          ['fontColor', 'hiliteColor', 'outdent', 'indent', 'align', 'horizontalRule', 'list', 'table'],\n          ['link', 'image', 'fullScreen', 'showBlocks', 'codeView', 'preview', 'print', 'save']\n        ],\n\n        callBackSave: (text) => handleSaveContent(text),\n      }}\n    />\n  )\n}\n\nexport default Editor\n","import ReactHtmlParser from 'react-html-parser'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport React, {\r\n  FC, useCallback,\r\n} from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport styles from '../messages/messages.module.css'\r\nimport {\r\n  activeStateEditor,\r\n  changeEditorContent,\r\n  changeSelectedType,\r\n  setKey,\r\n  toggleActiveFillEditor,\r\n} from '../../store/editorReducer'\r\nimport { deleteNote, changeItemDate } from '../../store/noteReducer'\r\nimport { shouldShowDay } from '../../helpers/shouldShowDay'\r\nimport { changeFormatDate } from '../../helpers/changeFormatDate'\r\n\r\nexport type PropsMessageItem = {\r\n  note: {\r\n    id: number;\r\n    key: string;\r\n    type: string;\r\n    content: string;\r\n    date: string;\r\n    createdAt?: {seconds: number};\r\n  };\r\n  previous?: {createdAt: {seconds: number}; date: string};\r\n  isAll?: boolean | undefined;\r\n}\r\n\r\nexport const MessageItem: FC<PropsMessageItem> = ({ note, previous, isAll }: PropsMessageItem) => {\r\n  const dispatch = useDispatch()\r\n  const date = new Date()\r\n  date.setTime(note.id)\r\n\r\n  const showDay = shouldShowDay(previous, note)\r\n  const showDate = changeFormatDate(new Date(note.id), '/')\r\n\r\n  const editorContent = useCallback(\r\n    (text, key, type, itemDate) => {\r\n      dispatch(changeSelectedType(type))\r\n      dispatch(changeItemDate(itemDate))\r\n      dispatch(activeStateEditor(true))\r\n      dispatch(toggleActiveFillEditor(false))\r\n      dispatch(changeEditorContent(text))\r\n      dispatch(setKey(key))\r\n    },\r\n    [dispatch],\r\n  )\r\n  const removeContent = useCallback(\r\n    async (key, type, dateItem) => {\r\n      dispatch(deleteNote(key, type, dateItem))\r\n    },\r\n    [dispatch],\r\n  )\r\n\r\n  let DateBlock = <div className={styles.date_item}>{showDate}</div>\r\n\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.message_item}>\r\n        <div\r\n          className={`${styles.message_item_box} ${\r\n            note.type === 'note' ? styles.class_note : styles.class_awareness\r\n          }`}\r\n        >\r\n          <span className={styles.message_time}>\r\n            {(date.getHours() === 0 ? '0' : '') + date.getHours() }\r\n            :\r\n            { (date.getMinutes() < 10 ? '0' : '') + date.getMinutes()}\r\n          </span>\r\n\r\n          <article className={`${styles.message_text}`}>\r\n            {ReactHtmlParser(note.content)}\r\n          </article>\r\n\r\n        </div>\r\n        <div className={styles.message_remote}>\r\n          <EditIcon\r\n            className={styles.message_editor}\r\n            onClick={() => editorContent(note.content, note.key, note.type, note.date)}\r\n          />\r\n\r\n          <DeleteIcon\r\n            className={styles.message_remove}\r\n            onClick={() => removeContent(note.key, note.type, note.date)}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className={styles.date_item_container}>{ isAll && showDay && DateBlock }</div>\r\n    </>\r\n  )\r\n}\r\n","import isSameDay from \"date-fns/isSameDay\"\r\n\r\nexport function shouldShowDay(previous: any, message: any) {\r\n\r\n\r\n  const isFirst = !previous\r\n  if (isFirst) {\r\n    return true\r\n  }\r\n\r\n  const isNewDay = !isSameDay(\r\n    previous.createdAt.seconds * 1000,\r\n    message.createdAt.seconds * 1000,\r\n  )\r\n\r\n  return isNewDay\r\n}\r\n","import React from 'react'\r\n\r\nimport useShallowEqualSelector from '../../hooks/useShallowEqualSelector'\r\nimport { MessageItem } from '../messageItem/MessageItem'\r\nimport styles from './messages.module.css'\r\n\r\nexport const Messages = () => {\r\n  const content = useShallowEqualSelector((state) => state.notes.todayNotes)\r\n  const activeFillEditor = useShallowEqualSelector(\r\n    (state) => state.editor.activeFillEditor)\r\n\r\n  return (\r\n    <div className={`${styles.messages_area} ${!activeFillEditor\r\n      ? styles.messages_area_active_editor\r\n      : ''} `}\r\n    >\r\n      {content.map((note: {\r\n        id: number;\r\n        type: string;\r\n        content: string;\r\n        key: string;\r\n        date: string;\r\n      }) => {\r\n        return (\r\n          <MessageItem\r\n            key={note.id}\r\n            note={note}\r\n          />\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n","import { withStyles } from '@material-ui/core/styles'\r\nimport Button from '@material-ui/core/Button'\r\nimport { purple } from '@material-ui/core/colors'\r\nimport React, { useCallback } from \"react\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport {\r\n  changeEditorContent,\r\n  changeSelectedType,\r\n  toggleActiveFillEditor,\r\n  toggleEditorOldContent\r\n} from \"../../store/editorReducer\"\r\nimport useShallowEqualSelector from \"../../hooks/useShallowEqualSelector\";\r\nimport styles from './editorPanel.module.css';\r\n\r\nexport const EditorPanel = () => {\r\n\r\n  const dispatch = useDispatch()\r\n  const select = useShallowEqualSelector((state) => state.editor.selectedType);\r\n  const activeFillEditor = useShallowEqualSelector((state) => state.editor.activeFillEditor);\r\n\r\n  const selectedType = useCallback((selected) => {\r\n    dispatch(changeSelectedType(selected))\r\n    dispatch(toggleActiveFillEditor(false))\r\n  }, [dispatch])\r\n\r\n  const handelHideEditor = useCallback((value) => {\r\n    dispatch(toggleActiveFillEditor(true))\r\n    dispatch(toggleEditorOldContent(false))\r\n    dispatch(changeEditorContent(''))\r\n  }, [dispatch])\r\n\r\n  const handelClearEditor = useCallback(() => {\r\n    dispatch(toggleEditorOldContent(false))\r\n    dispatch(changeEditorContent(''))\r\n  }, [dispatch])\r\n\r\n  const NoteButton = withStyles((theme) => ({\r\n    root: {\r\n      color: theme.palette.getContrastText(purple[500]),\r\n      backgroundColor: select === 'note' ? '#B6A6F7' : 'default',\r\n      '&:hover': {\r\n        opacity: '0.8',\r\n      },\r\n    },\r\n  }))(Button);\r\n\r\n  const AwarenessButton = withStyles((theme) => ({\r\n    root: {\r\n      color: theme.palette.getContrastText(purple[500]),\r\n      backgroundColor: select === 'note' ? 'default' : '#F6A4D5',\r\n      '&:hover': {\r\n        opacity: '0.8',\r\n      },\r\n    },\r\n  }))(Button);\r\n\r\n  const CleanButton = withStyles((theme) => ({\r\n    root: {\r\n      color: \"#4F68A2\",\r\n      backgroundColor: \"#ffffff\",\r\n      border: \"1px solid #4F68A2\",\r\n      '&:hover': {\r\n        opacity: \"0.8\",\r\n      },\r\n    },\r\n  }))(Button);\r\n\r\n  const HiddenButton = withStyles((theme) => ({\r\n    root: {\r\n      color: \"#4F68A2\",\r\n      backgroundColor: \"#ffffff\",\r\n      border: \"1px solid #4F68A2\",\r\n      '&:hover': {\r\n        opacity: \"0.8\",\r\n      },\r\n    },\r\n  }))(Button);\r\n\r\n  return (\r\n    <div className={styles.editor_panel}>\r\n      <div className={styles.editor_panel_group}>\r\n        <NoteButton variant=\"contained\" color=\"default\"\r\n                    onClick={() => selectedType(\"note\")}>Заметка</NoteButton>\r\n        <AwarenessButton variant=\"contained\" color=\"default\"\r\n                         onClick={() => selectedType(\"awareness\")}>Осознание</AwarenessButton>\r\n      </div>\r\n      {!activeFillEditor && (<div className={styles.editor_panel_group}>\r\n        <CleanButton color=\"default\"\r\n                     onClick={handelClearEditor}>Очистить</CleanButton>\r\n        <HiddenButton color=\"default\"\r\n                      onClick={handelHideEditor}>Скрыть</HiddenButton>\r\n      </div>)}\r\n    </div>\r\n  )\r\n}","import React from 'react';\nimport { SuccessEditModal } from '../modal/Modal';\nimport Editor from '../editor/Editor';\nimport { Messages } from '../messages/Messages';\nimport { EditorPanel } from '../editorPanel/EditorPanel';\nimport useShallowEqualSelector from '../../hooks/useShallowEqualSelector';\nimport { changeFormatDate } from '../../helpers/changeFormatDate';\nimport styles from './note.module.css';\n\nexport const Note = () => {\n  const selectedDate = useShallowEqualSelector((state) =>\n    changeFormatDate(state.calendar.selectedDate, ''));\n  const today = changeFormatDate(new Date(), '');\n  const activeEditor = useShallowEqualSelector(\n    (state) => state.editor.activeEditor\n  );\n\n  if (today === selectedDate || activeEditor) {\n    return (\n      <>\n        <SuccessEditModal />\n        <Messages />\n        <div className={styles.editor}>\n          <EditorPanel />\n          <Editor />\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <SuccessEditModal />\n      <Messages />\n    </>\n  );\n};\n","import { BaseThunkType, InferActionsTypes } from './index';\r\nimport { changeFormatDate } from '../helpers/changeFormatDate';\r\nimport { db } from '../services/firebase';\r\n\r\nconst initialState = {\r\n  thunk: '',\r\n  thought: '',\r\n  errorThanks: '' as string,\r\n};\r\n\r\nexport const thunksDayReducer = (state = initialState, action: ActionsType) => {\r\n  switch (action.type) {\r\n    case 'AW/NOTE/FETCH_THANKS_DAY':\r\n    case 'AW/NOTE/FETCH_THANKS_FAILURE':\r\n    case 'AW/NOTE/REQUEST_THANKS':\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst actions = {\r\n  thunksError: (error: string) =>\r\n    ({\r\n      type: 'AW/NOTE/FETCH_THANKS_FAILURE',\r\n      payload: {\r\n        errorThanks: error,\r\n      },\r\n    } as const),\r\n  getThunksToday: (thunk: string, thought: string) =>\r\n    ({\r\n      type: 'AW/NOTE/FETCH_THANKS_DAY',\r\n      payload: {\r\n        thunk,\r\n        thought,\r\n        errorThanks: '',\r\n      },\r\n    } as const),\r\n  requestThoughtToday: () =>\r\n    ({\r\n      type: 'AW/NOTE/REQUEST_THANKS',\r\n      payload: {\r\n        thunk: '',\r\n        thought: '',\r\n        errorThanks: '',\r\n      },\r\n    } as const),\r\n};\r\n\r\nexport const requestDataThanks = (): ThunkType => async (dispatch) => {\r\n  dispatch(actions.requestThoughtToday())\r\n}\r\n\r\nexport const fetchToDayThanks = (): ThunkType => async (dispatch, getState) => {\r\n\r\n  const selectedDate = changeFormatDate(getState().calendar.selectedDate, '');\r\n  const userUid = getState().auth.uid;\r\n  try {\r\n\r\n    const arrThunk = await db\r\n      .collection(`${userUid}/${selectedDate}/thunks/`)\r\n      .get();\r\n\r\n    let thunks: any = ''\r\n    let thought: any = ''\r\n    arrThunk.forEach((doc) => {\r\n      if (doc.id === 'thunks') {\r\n        if (doc.data().content) {\r\n          thunks = doc.data().content\r\n        } else {\r\n          thunks = ''\r\n        }\r\n      }\r\n\r\n      if (doc.id === 'thought') {\r\n        if (doc.data().content) {\r\n          thought = doc.data().content\r\n        } else {\r\n          thought = ''\r\n        }\r\n      }\r\n    })\r\n\r\n    dispatch(actions.getThunksToday(thunks, thought));\r\n  } catch (error) {\r\n    dispatch(actions.thunksError(error));\r\n  }\r\n};\r\n\r\nexport const addThanks = (content: string, type: string): ThunkType => async (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  const selectedDate = changeFormatDate(getState().calendar.selectedDate, '');\r\n  const today = changeFormatDate(new Date(), '');\r\n  const userUid: string = getState().auth.uid;\r\n\r\n  if (today !== selectedDate) {\r\n    return;\r\n  }\r\n\r\n  const thunksRef = db\r\n    .collection(userUid)\r\n    .doc(selectedDate)\r\n    .collection('thunks')\r\n    .doc(type);\r\n\r\n  try {\r\n    await thunksRef.set({\r\n      content,\r\n    });\r\n  } catch (error) {\r\n    dispatch(actions.thunksError(error));\r\n  }\r\n  dispatch(fetchToDayThanks());\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\ntype ThunkType = BaseThunkType<ActionsType>;\r\n","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n  format,\r\n  startOfWeek,\r\n  endOfMonth,\r\n  addDays,\r\n  startOfMonth,\r\n  endOfWeek,\r\n  isSameMonth,\r\n  isSameDay,\r\n  addMonths,\r\n  subMonths,\r\n  isFuture,\r\n} from 'date-fns';\r\nimport { ru } from 'date-fns/locale';\r\n\r\nimport styles from './sidebarCalendar.module.css';\r\nimport { changeFormatDate } from '../../helpers/changeFormatDate';\r\nimport { fetchToDayData } from '../../store/calendarReducer';\r\nimport {\r\n  changeEditorContent,\r\n  toggleActiveFillEditor,\r\n  toggleEditorOldContent,\r\n} from '../../store/editorReducer';\r\nimport { fetchToDayActivity } from '../../store/activityReducer';\r\nimport {fetchToDayThanks} from \"../../store/thunksDayReducer\";\r\n\r\nclass Calendar extends React.Component {\r\n  state = {\r\n    currentMonth: new Date(),\r\n  };\r\n\r\n  renderHeader() {\r\n    const dateFormat = 'MMMM yyyy';\r\n    return (\r\n      <div className={`${styles.header} ${styles.row}`}>\r\n        <div className={`${styles.col} ${styles.colStart}`}>\r\n          <div className={`${styles.icon}`} onClick={this.prevMonth}>\r\n            chevron_left\r\n          </div>\r\n        </div>\r\n        <div className={`${styles.col}  ${styles.colCenter}`}>\r\n          <span>\r\n            {format(this.state.currentMonth, dateFormat, { locale: ru })}\r\n          </span>\r\n        </div>\r\n        <div\r\n          className={`${styles.col} ${styles.colEnd}`}\r\n          onClick={this.nextMonth}\r\n        >\r\n          <div className={`${styles.icon}`}>chevron_right</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDays() {\r\n    const dateFormat = 'EEE';\r\n    const days = [];\r\n    let startDate = startOfWeek(this.state.currentMonth);\r\n    for (let i = 0; i < 7; i++) {\r\n      let dayWek = format(addDays(startDate, i), dateFormat, { locale: ru });\r\n      days.push(\r\n        <div\r\n          className={`${styles.col} ${styles.colCenter} ${styles.dayWek}`}\r\n          key={i}\r\n        >\r\n          {dayWek}\r\n        </div>\r\n      );\r\n    }\r\n    return <div className={`${styles.days} ${styles.row}`}>{days}</div>;\r\n  }\r\n\r\n  renderCells() {\r\n    const { currentMonth } = this.state;\r\n    const { selectedDate } = this.props;\r\n    const monthStart = startOfMonth(currentMonth);\r\n    const monthEnd = endOfMonth(monthStart);\r\n    const startDate = startOfWeek(monthStart);\r\n    const endDate = endOfWeek(monthEnd);\r\n\r\n    const dateFormat = 'd';\r\n    const rows = [];\r\n\r\n    let days = [];\r\n    let day = startDate;\r\n    let formattedDate = '';\r\n\r\n    while (day <= endDate) {\r\n      for (let i = 0; i < 7; i++) {\r\n        formattedDate = format(day, dateFormat);\r\n        const cloneDay = day;\r\n\r\n        days.push(\r\n          <div\r\n            className={`${styles.col} ${styles.cell}\r\n              ${\r\n                !isSameMonth(day, monthStart)\r\n                  ? `disabled ${styles.disabled}`\r\n                  : isSameDay(day, new Date())\r\n                  ? `selected ${styles.selected}`\r\n                  : ''\r\n              }\r\n              ${isSameDay(day, selectedDate) ? styles.selectedDay : ''}\r\n              ${isFuture(day) ? `disabled ${styles.disabled}` : ''}\r\n            }`}\r\n            key={day}\r\n            onClick={() => this.onDateClick(cloneDay)}\r\n          >\r\n            <span className={`${styles.number}`}>{formattedDate}</span>\r\n\r\n            <span className={`${styles.bg}`}></span>\r\n          </div>\r\n        );\r\n        day = addDays(day, 1);\r\n      }\r\n      rows.push(\r\n        <div className={`${styles.row}`} key={day}>\r\n          {days}\r\n        </div>\r\n      );\r\n      days = [];\r\n    }\r\n    return <div className={`${styles.body}`}>{rows}</div>;\r\n  }\r\n\r\n  onDateClick = (day) => {\r\n    this.props.history.push(`/day/${changeFormatDate(day)}`);\r\n    this.props.fetchToDayData(day);\r\n    this.props.toggleEditorOldContent(false);\r\n    this.props.changeEditorContent('');\r\n    this.props.toggleActiveFillEditor(true);\r\n    this.props.fetchToDayActivity();\r\n    this.props.fetchToDayThanks();\r\n  };\r\n\r\n  nextMonth = () => {\r\n    this.setState({\r\n      currentMonth: addMonths(this.state.currentMonth, 1),\r\n    });\r\n  };\r\n\r\n  prevMonth = () => {\r\n    this.setState({\r\n      currentMonth: subMonths(this.state.currentMonth, 1),\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={`${styles.calendar}`}>\r\n        {this.renderHeader()}\r\n        {this.renderDays()}\r\n        {this.renderCells()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    selectedDate: state.calendar.selectedDate\r\n    // loadingSmiles: state.smile.loadingSmiles,\r\n    // errorSmiles: state.smile.errorSmiles,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  fetchToDayData,\r\n  toggleEditorOldContent,\r\n  changeEditorContent,\r\n  toggleActiveFillEditor,\r\n  fetchToDayActivity,\r\n  fetchToDayThanks,\r\n})(withRouter(Calendar));\r\n","import React, { useEffect, useState, ChangeEvent, FC } from 'react';\nimport SaveIcon from '@material-ui/icons/Save';\nimport styles from './inputDay.module.css';\nimport { useDispatch } from 'react-redux';\n\nimport { addThanks, fetchToDayThanks } from './../../store/thunksDayReducer';\nimport { isSameDay } from 'date-fns';\n\ntype PropsType = {\n  title: string;\n  type: string;\n  value: string;\n  selectedDate: Date;\n};\n\nexport const InputDay: FC<PropsType> = ({\n  title,\n  type,\n  value,\n  selectedDate,\n}) => {\n  const [text, setText] = useState('');\n  const [editMode, setEditMode] = useState(true);\n  const [hadChange, setHadChange] = useState(false);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchToDayThanks());\n    setText(value);\n    if (value) {\n      setEditMode(false);\n    } else {\n      setEditMode(true);\n    }\n  }, [dispatch, value]);\n\n  const changeText = (e: ChangeEvent<HTMLTextAreaElement>) => {\n    setText(e.target.value);\n    if (text !== value) {\n      setHadChange(true);\n    }\n  };\n\n  const activeEditMode = () => {\n    setEditMode(true);\n  };\n\n  const deActiveEditMode = () => {\n    dispatch(addThanks(text, type));\n    setEditMode(false);\n    setHadChange(false);\n  };\n  if (editMode && isSameDay(selectedDate, new Date())) {\n    return (\n      <div className={styles.blockInput}>\n        <p className={styles.inputTitle}>{title}</p>\n        <textarea\n          className={styles.input}\n          rows={3}\n          value={text}\n          onChange={changeText}\n          autoFocus\n        >\n          {' '}\n        </textarea>\n\n        <SaveIcon\n          className={styles.save}\n          onClick={deActiveEditMode}\n          style={hadChange ? { color: '#3f51b5' } : { color: '#AFBAD1' }}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.blockInput}>\n      <p className={styles.inputTitle}>{title}</p>\n      <div onClick={activeEditMode}>\n        <p className={styles.showText}>{text}</p>\n      </div>\n    </div>\n  );\n};\n","import React, { FC, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Brightness5Icon from '@material-ui/icons/Brightness5';\r\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\r\n\r\nimport SpaOutlinedIcon from '@material-ui/icons/SpaOutlined';\r\nimport SpaIcon from '@material-ui/icons/Spa';\r\n\r\nimport styles from './activityEvent.module.css';\r\n\r\nimport {\r\n  addActivity,\r\n  removeActivity,\r\n  fetchToDayActivity,\r\n} from '../../store/activityReducer';\r\n\r\nexport const ActivityEvent: FC = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const todayActivity = useSelector(\r\n    (state: {active: {todayActivity: any}}) => state.active.todayActivity\r\n  );\r\n\r\n  const activeMeditation =\r\n    todayActivity && todayActivity.includes('Meditation');\r\n  const activeYoga = todayActivity && todayActivity.includes('Yoga');\r\n\r\n  useEffect(() => {\r\n  dispatch(fetchToDayActivity());\r\n  }, [dispatch]);\r\n\r\n  const handleActive = (name: string) => {\r\n    const active = todayActivity.includes(name);\r\n    if (active) {\r\n      dispatch(removeActivity(name));\r\n    } else {\r\n      dispatch(addActivity(name));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.actionBox}>\r\n      <div\r\n        className={styles.actionItem}\r\n        onClick={() => handleActive('Meditation')}\r\n      >\r\n        {activeMeditation ? (\r\n          <Brightness7Icon style={{ color: '#F6A4D5' }} />\r\n        ) : (\r\n          <Brightness5Icon style={{ color: '#AFBAD1' }} />\r\n        )}\r\n        <p className={styles.actionText}>Meditation</p>\r\n      </div>\r\n      <div className={styles.actionItem} onClick={() => handleActive('Yoga')}>\r\n        {activeYoga ? (\r\n          <SpaIcon style={{ color: '#F6A4D5' }} />\r\n        ) : (\r\n          <SpaOutlinedIcon style={{ color: '#AFBAD1' }} />\r\n        )}\r\n        <p className={styles.actionText}>Yoga</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\nimport styles from './sidebar.module.css';\r\nimport SidebarCalendar from '../sidebarCalendar/SidebarCalendar';\r\nimport { InputDay } from '../inputDay/InputDay';\r\nimport { ActivityEvent } from '../activityEvent/ActivityEvent';\r\nimport { useSelector } from 'react-redux';\r\nimport { AppStateType } from '../../store';\r\n\r\nexport const Sidebar: FC = () => {\r\n  const selectedDate = useSelector(\r\n    (state: AppStateType) => state.calendar.selectedDate\r\n  );\r\n  const thunksValue = useSelector((state: AppStateType) => state.thunks.thunk);\r\n\r\n  const thoughtValue = useSelector(\r\n    (state: AppStateType) => state.thunks.thought\r\n  );\r\n  return (\r\n    <div className={styles.pageDaySideBar}>\r\n      <SidebarCalendar />\r\n      <InputDay\r\n        title=\"Мысль дня:\"\r\n        type=\"thought\"\r\n        value={thoughtValue}\r\n        selectedDate={selectedDate}\r\n      />\r\n      <InputDay\r\n        title=\"Благодарность:\"\r\n        type=\"thunks\"\r\n        value={thunksValue}\r\n        selectedDate={selectedDate}\r\n      />\r\n      <ActivityEvent />\r\n    </div>\r\n  );\r\n};\r\n","import React, { FC, useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport styles from './day.module.css';\r\nimport { AppStateType } from '../../store';\r\nimport { getNotesSelectedDay } from '../../store/noteReducer';\r\nimport { Note } from '../../component/note/Note';\r\nimport { fetchToDayThanks } from '../../store/thunksDayReducer';\r\nimport {Sidebar} from \"../../component/sidebar/Sidebar\";\r\n\r\nexport const Day: FC = () => {\r\n  const selectedDate = useSelector(\r\n    (state: AppStateType) => state.calendar.selectedDate\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getNotesSelectedDay());\r\n    dispatch(fetchToDayThanks());\r\n  }, [dispatch]);\r\n\r\n  if (selectedDate === null) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.pageDay}>\r\n      <div className={styles.pageDayContent}>\r\n        <Note />\r\n      </div>\r\n     <Sidebar />\r\n    </div>\r\n  );\r\n};\r\n","import React, { FC, useEffect } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useLocation } from 'react-router-dom'\r\nimport InfiniteScroll from 'react-infinite-scroll-component'\r\nimport {\r\n  getAllNotes,\r\n  getNotesSelectedDay,\r\n} from '../../store/noteReducer'\r\nimport useShallowEqualSelector from '../../hooks/useShallowEqualSelector'\r\nimport styles from './allMessages.module.css'\r\nimport { AppStateType } from '../../store'\r\nimport { fetchToDayThanks } from '../../store/thunksDayReducer'\r\nimport { MessageItem } from '../messageItem/MessageItem'\r\nimport { Spinner } from '../spinner/Spinner'\r\n\r\n\r\nexport const AllMessages: FC = (props) => {\r\n\r\n  const activeFillEditor = useShallowEqualSelector(\r\n    (state: AppStateType) => state.editor.activeFillEditor,\r\n  )\r\n  const allNotes = useShallowEqualSelector(\r\n    (state: AppStateType) => state.notes.allNotes,\r\n  )\r\n  const allAwareness = useShallowEqualSelector(\r\n    (state: AppStateType) => state.notes.allAwareness,\r\n  )\r\n  const runOutOfNotes = useShallowEqualSelector(\r\n    (state: AppStateType) => state.notes.runOutOfNotes,\r\n  )\r\n  const inverse = true\r\n  const isAll = true\r\n  const dispatch = useDispatch()\r\n  const useHistory = useLocation();\r\n  const pathWithSlash = useHistory.pathname.substring(1)\r\n  let allItems = pathWithSlash === 'note' ? allNotes : allAwareness\r\n\r\n\r\n  useEffect(() => {\r\n    dispatch(getNotesSelectedDay())\r\n    dispatch(fetchToDayThanks())\r\n    dispatch(getAllNotes(pathWithSlash))\r\n  }, [dispatch, pathWithSlash])\r\n  return (\r\n    <div\r\n      className={`${styles.messages_area} ${\r\n        !activeFillEditor ? styles.messages_area_active_editor : ''\r\n      } `}\r\n      id=\"scrollableDiv\"\r\n      style={{\r\n        overflow: 'auto',\r\n        display: 'flex',\r\n        flexDirection: 'column-reverse',\r\n      }}\r\n    >\r\n\r\n      <InfiniteScroll\r\n        dataLength={allItems.length}\r\n        next={() => dispatch(getAllNotes(pathWithSlash))}\r\n        style={{ display: 'flex', flexDirection: 'column-reverse' }}\r\n        inverse={inverse}\r\n        hasMore={runOutOfNotes}\r\n        loader={<h4><Spinner/></h4>}\r\n        scrollableTarget=\"scrollableDiv\"\r\n      >\r\n\r\n      { allItems && allItems.map(\r\n        (note:\r\n           {\r\n             id: number;\r\n             type: string;\r\n             content: string;\r\n             key: string;\r\n             date: string;\r\n             createdAt: {seconds: number}\r\n           }, index) => {\r\n          const previous = allItems[index + 1]\r\n          return (\r\n            <MessageItem\r\n              key={note.key}\r\n              note={note}\r\n              previous={previous}\r\n              isAll={isAll}\r\n            />\r\n          )\r\n        },\r\n      )}\r\n      </InfiniteScroll>\r\n    </div>\r\n  )\r\n}\r\n","import React, { FC, useCallback, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { getNotesSelectedDay } from '../../store/noteReducer';\r\nimport { fetchToDayThanks } from '../../store/thunksDayReducer';\r\nimport { Sidebar } from '../../component/sidebar/Sidebar';\r\nimport { SuccessEditModal } from '../../component/modal/Modal';\r\nimport Editor from '../../component/editor/Editor';\r\nimport { AllMessages } from '../../component/allMessages/AllMessages';\r\n\r\nimport {\r\n  changeEditorContent,\r\n  toggleActiveFillEditor,\r\n  toggleEditorOldContent,\r\n} from '../../store/editorReducer';\r\nimport useShallowEqualSelector from '../../hooks/useShallowEqualSelector';\r\nimport styles from './notes.module.css';\r\n\r\nexport const Notes: FC = () => {\r\n  const activeFillEditor = useShallowEqualSelector(\r\n    (state) => state.editor.activeFillEditor\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getNotesSelectedDay());\r\n    dispatch(fetchToDayThanks());\r\n  }, [dispatch]);\r\n\r\n  const handelHideEditor = useCallback(\r\n    (value) => {\r\n      dispatch(toggleActiveFillEditor(true));\r\n      dispatch(toggleEditorOldContent(false));\r\n      dispatch(changeEditorContent(''));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  return (\r\n    <div className={styles.pageDay}>\r\n      <div className={styles.pageDayContent}>\r\n        <SuccessEditModal />\r\n        <AllMessages />\r\n        <div className={styles.editor}>\r\n          {!activeFillEditor && (\r\n            <Button className={styles.button} color=\"default\" onClick={handelHideEditor}>\r\n              Скрыть\r\n            </Button>\r\n          )}\r\n          <Editor />\r\n        </div>\r\n      </div>\r\n      <Sidebar />\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport logo from './logo.svg';\r\nimport icon from './signOut.svg';\r\nimport styles from './header.module.css';\r\n\r\nimport { logout } from '../../store/authReducer';\r\nimport { AppStateType } from '../../store';\r\nimport { changeFormatDate } from '../../helpers/changeFormatDate';\r\nimport { changeTypePage } from '../../store/noteReducer'\r\n\r\nconst Header = () => {\r\n  const dispatch = useDispatch();\r\n  const selectedDate = useSelector(\r\n    (state: AppStateType) => state.calendar.selectedDate,\r\n  );\r\n\r\n  const data = selectedDate ? changeFormatDate(selectedDate, '/') : changeFormatDate(new Date(), '/')\r\n\r\n  const changeType = (type: string) => {\r\n    dispatch(changeTypePage(type))\r\n  }\r\n\r\n  return (\r\n    <header>\r\n      <div className={styles.headerContainer}>\r\n        <div className={styles.headerLogo}>\r\n          <Link to=\"/\">\r\n            <img className={styles.logo} src={logo} alt=\"Awiary\" />\r\n          </Link>\r\n        </div>\r\n        <div className={styles.headerDate}>\r\n          {data}\r\n        </div>\r\n        <div className={styles.headerNavigationBlock}>\r\n          <nav className={styles.headerNavigation}>\r\n            <Link className={styles.headerNavigationItem} to=\"/\">\r\n              Календарь\r\n            </Link>\r\n            <Link\r\n              className={`${styles.headerNavigationItem} ${styles.headerNavigationItemCenter}`}\r\n              to=\"/note\"\r\n              onClick={() => changeType('note')}\r\n            >\r\n              Заметки\r\n            </Link>\r\n            <Link className={styles.headerNavigationItem} to=\"/awareness\" onClick={() => changeType('awareness')}>\r\n              Осознания\r\n            </Link>\r\n          </nav>\r\n          <Link\r\n            onClick={() => dispatch(logout())}\r\n            className={styles.headerLogout}\r\n            to=\"/\"\r\n          >\r\n            <img src={icon} alt=\"error icon\" />\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React, { FC, useEffect } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom'\nimport Container from '@material-ui/core/Container';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { Home } from './pages/Home';\nimport { Login } from './pages/Sign/Login';\nimport { SignUp } from './pages/Sign/Signup';\nimport { Spinner } from './component/spinner/Spinner';\nimport { getAuthUserData } from './store/authReducer';\nimport { AppStateType } from './store';\nimport { PrivateRoute, PublicRoute } from './helpers/customRoute';\nimport { Day } from './pages/Day/Day';\nimport { Notes } from './pages/Notes/Notes';\nimport styles from './App.module.css';\nimport Header from './component/header/Header'\n\nconst App: FC = (props) => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getAuthUserData());\n  }, [dispatch]);\n\n  const loading = useSelector((state: AppStateType) => state.auth.loading);\n  const isAuth = useSelector((state: AppStateType) => state.auth.isAuth);\n\n  if (loading) {\n    return <Spinner />;\n  }\n  if (isAuth) {\n    return (\n      <Container className={styles.container} maxWidth=\"xl\">\n        <Redirect to={{ pathname: '/' }} />\n        <Header />\n        <Switch>\n          <Route exact path=\"/\" authenticated={isAuth} component={Home} {...props} />\n          <Route path=\"/note\" authenticated={isAuth} component={Notes} />\n          <Route\n            path=\"/awareness\"\n            authenticated={isAuth}\n            component={Notes}\n          />\n          <Route\n            path=\"/day/:dayId?\"\n            authenticated={isAuth}\n            component={Day}\n          />\n        </Switch>\n\n      </Container>\n    );\n  }\n\n  return (\n    <Container className={styles.container} maxWidth=\"xl\">\n      <Redirect to={{ pathname: '/login' }} />\n      <Switch>\n        <Route path=\"/signup\" authenticated={isAuth} component={SignUp} />\n        <Route path=\"/login\" authenticated={isAuth} component={Login} />\n      </Switch>\n\n    </Container>\n  );\n  // return (\n  //   <Container className={styles.container} maxWidth=\"xl\">\n  //\n  //     <Switch>\n  //       <PrivateRoute exact path=\"/\" authenticated={isAuth} component={Home} {...props} />\n  //       <PrivateRoute path=\"/note\" authenticated={isAuth} component={Notes} />\n  //       <PrivateRoute\n  //         path=\"/awareness\"\n  //         authenticated={isAuth}\n  //         component={Notes}\n  //       />\n  //       <PrivateRoute\n  //         path=\"/day/:dayId?\"\n  //         authenticated={isAuth}\n  //         component={Day}\n  //       />\n  //       <PublicRoute path=\"/signup\" authenticated={isAuth} component={SignUp} />\n  //       <PublicRoute path=\"/login\" authenticated={isAuth} component={Login} />\n  //     </Switch>\n  //\n  //   </Container>\n  // );\n};\n\nexport default App;\n","import {\r\n  Action,\r\n  applyMiddleware,\r\n  combineReducers,\r\n  compose,\r\n  createStore,\r\n} from 'redux';\r\nimport thunkMiddleware, { ThunkAction } from 'redux-thunk';\r\nimport { authReducer } from './authReducer';\r\nimport calendarReducer from './calendarReducer';\r\nimport { notesReducer } from './noteReducer';\r\nimport { editorReducer } from './editorReducer';\r\nimport { thunksDayReducer } from './thunksDayReducer';\r\nimport { activeReducer } from './activityReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  active: activeReducer,\r\n  thunks: thunksDayReducer,\r\n  editor: editorReducer,\r\n  notes: notesReducer,\r\n  calendar: calendarReducer,\r\n  auth: authReducer,\r\n});\r\n\r\ntype RootReducerType = typeof rootReducer;\r\nexport type AppStateType = ReturnType<RootReducerType>;\r\n\r\nexport type InferActionsTypes<T> = T extends {\r\n  [keys: string]: (...args: any[]) => infer U;\r\n}\r\n  ? U\r\n  : never;\r\n\r\nexport type BaseThunkType<\r\n  A extends Action = Action,\r\n  R = Promise<void>\r\n> = ThunkAction<R, AppStateType, unknown, A>;\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(\r\n  rootReducer,\r\n  composeEnhancers(applyMiddleware(thunkMiddleware)),\r\n);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nimport App from './App';\r\nimport { store } from './store/index';\r\n\r\nconst app = (\r\n  <Provider store={store}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n  </Provider>\r\n);\r\n\r\nReactDOM.render(\r\n  app,\r\n  document.getElementById('root'),\r\n);\r\n\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Sign_wrapper__3EkaY\",\"form_box\":\"Sign_form_box__3olgG\",\"header_block\":\"Sign_header_block__2KOSb\",\"title\":\"Sign_title__3Whmr\",\"submit\":\"Sign_submit__2HMvl\",\"signGoogle\":\"Sign_signGoogle__3d4RE\",\"signup\":\"Sign_signup__3lw6m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages_area\":\"messages_messages_area__uHjwh\",\"messages_area_active_editor\":\"messages_messages_area_active_editor__3AaQe\",\"message_item\":\"messages_message_item__1wqm4\",\"class_note\":\"messages_class_note__1Hz1b\",\"class_awareness\":\"messages_class_awareness__YgHXB\",\"message_item_box\":\"messages_message_item_box__1Vmhn\",\"message_time\":\"messages_message_time__1ejCz\",\"message_text\":\"messages_message_text__hKe9G\",\"message_remote\":\"messages_message_remote__t2d8T\",\"message_editor\":\"messages_message_editor__1YjSC\",\"message_remove\":\"messages_message_remove__1xnOI\",\"date_item_container\":\"messages_date_item_container__1u8aW\",\"date_item\":\"messages_date_item__1yJAy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerContainer\":\"header_headerContainer__3zc4b\",\"headerLogo\":\"header_headerLogo__c7jFp\",\"logo\":\"header_logo__dqkhQ\",\"headerDate\":\"header_headerDate__1OlCq\",\"headerNavigationBlock\":\"header_headerNavigationBlock__wK-ca\",\"headerNavigation\":\"header_headerNavigation__1T0Ak\",\"headerNavigationItem\":\"header_headerNavigationItem__tCEnP\",\"headerNavigationItemCenter\":\"header_headerNavigationItemCenter__3ItL3\",\"headerLogout\":\"header_headerLogout__1vxrr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"blockInput\":\"inputDay_blockInput__k3TF2\",\"inputTitle\":\"inputDay_inputTitle__au8MJ\",\"input\":\"inputDay_input__1IRYk\",\"showText\":\"inputDay_showText__2AOeP\",\"save\":\"inputDay_save__1vKH6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"actionBox\":\"activityEvent_actionBox__sdLCh\",\"actionItem\":\"activityEvent_actionItem__97kJi\",\"actionText\":\"activityEvent_actionText__2A6Nc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageDay\":\"notes_pageDay__KZyLp\",\"pageDayContent\":\"notes_pageDayContent__ZUsDK\",\"editor\":\"notes_editor__QlVvK\",\"button\":\"notes_button__1VbZa\"};","module.exports = __webpack_public_path__ + \"static/media/google.1acf3b9c.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor_panel\":\"editorPanel_editor_panel__2We5s\",\"editor_panel_group\":\"editorPanel_editor_panel_group__S62-q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageDay\":\"day_pageDay__2Jgis\",\"pageDayContent\":\"day_pageDayContent__21BtE\",\"pageDaySideBar\":\"day_pageDaySideBar__25eC5\",\"Calendar_smile__18_Of\":\"day_Calendar_smile__18_Of__ORw6-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__11IIC\",\"paper\":\"modal_paper__rcC3A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages_area\":\"allMessages_messages_area__1fBHj\",\"messages_area_active_editor\":\"allMessages_messages_area_active_editor__3HGAL\",\"message_item\":\"allMessages_message_item__3DGGk\",\"class_note\":\"allMessages_class_note__2eYss\",\"class_awareness\":\"allMessages_class_awareness__1rKvN\",\"message_item_box\":\"allMessages_message_item_box__yLO_0\",\"message_time\":\"allMessages_message_time__E0rh1\",\"message_text\":\"allMessages_message_text__1WLYW\",\"message_remote\":\"allMessages_message_remote__3P_Ws\",\"message_editor\":\"allMessages_message_editor__1DxpD\",\"message_remove\":\"allMessages_message_remove__1QMlV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__fkyjV\",\"App\":\"App_App__iePe9\",\"App-logo\":\"App_App-logo__jXAwo\",\"App-logo-spin\":\"App_App-logo-spin__3vZlR\",\"App-header\":\"App_App-header__3d04R\",\"App-link\":\"App_App-link__3-vbu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"Calendar_icon__1VCOU\",\"logo\":\"Calendar_logo__1vf5l\",\"row\":\"Calendar_row__12k7n\",\"row-middle\":\"Calendar_row-middle__cynuY\",\"col\":\"Calendar_col__dZaRJ\",\"colStart\":\"Calendar_colStart__1gIv7\",\"colCenter\":\"Calendar_colCenter__VdiNf\",\"colEnd\":\"Calendar_colEnd__c2hVI\",\"calendar\":\"Calendar_calendar__20ymr\",\"header\":\"Calendar_header__n_t08\",\"days\":\"Calendar_days__3o9xZ\",\"cell\":\"Calendar_cell__27Zoq\",\"selected\":\"Calendar_selected__OM7G1\",\"body\":\"Calendar_body__35nCY\",\"number\":\"Calendar_number__10VpR\",\"disabled\":\"Calendar_disabled__3ygA8\",\"bg\":\"Calendar_bg__1gMSQ\",\"activities\":\"Calendar_activities__1_imC\",\"allActivity\":\"Calendar_allActivity__1_Ucw\",\"activity\":\"Calendar_activity__sqVRf\",\"notesToday\":\"Calendar_notesToday__2hpTH\",\"awarenesToday\":\"Calendar_awarenesToday__38vjY\"};"],"sourceRoot":""}